<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> The Rickety 3D Printer | Kellan J. Cerveny </title> <meta name="author" content="Kellan J. Cerveny"> <meta name="description" content="&lt;!&gt; A 3D printer built from scratch in the labs of Texas Inventionworks."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/KC_skinny.png?018a00b0c87018d8438a76af62b3b8ed"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://kellancerveny.com/projects/rickety-3d-printer/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/img-comparison-slider@8.0.6/dist/styles.min.css" integrity="sha256-3qTIuuUWIFnnU3LpQMjqiXc0p09rvd0dmj+WkpQXSR8=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11.0.5/swiper-bundle.min.css" integrity="sha256-yUoNxsvX+Vo8Trj3lZ/Y5ZBf8HlBFsB6Xwm7rH75/9E=" crossorigin="anonymous"> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kellan</span> J. Cerveny </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">The Rickety 3D Printer</h1> <p class="post-description"> A 3D printer built from scratch in the labs of Texas Inventionworks.</p> </header> <article> <p>The <em>Rickety 3D Printer</em> was my final lab submission for EE 445L Embedded Systems Lab, one of my favorite classes at UT. It is result of three months of very dedicated work, lots of support from others, and more than a few mishaps. Ultimately, this project submission came in 2nd for the UT ECE Embedded Systems competition, earning just over half of all possible points and getting me out of taking my final.</p> <h2 id="background">Background</h2> <p>During my last year of my UT undergrad I took EE 445L Embedded Systems Lab, considered by many students to be one of the most challenging undergraduate ECE classes. Throughout the semester we were to complete 11 labs, the final lab being of our own design. Throughout the semester we would begin to design and build our final labs. Each team of students would submit their final project to the competition, and the top three projects would be exempt from taking the final exam. For a class as tough as this, the award was a powerful incentive.</p> <h3 id="texas-inventionworks">Texas Inventionworks</h3> <p>I was fortunate to have a few advantages in this project. First, I was a part-time employee at Texas Inventionworks (TIW), the makerspace for engineering students at UT. This place is <em>magic</em>. Chock-full of interesting machines, interesting ideas, and interesting people. And I happened to be familiar with many of these interesting machines, ideas, and people through my time working at TIW.</p> <p>When the opportunity arose to come up with our own project, I went straight to my colleagues and friends at TIW asking for advice. One of the leaders, Steve, offered a great idea. There were some linear rails, belts, and stepper motors left over from a previous project. He offered to let me use those to build a 3D printer if I would mention TIW and generate some excitement for the space.</p> <p>Wonderful! A win-win for everyone. I could get some parts and a desk in the electronics lab, and all I had to do was hype my favorite place at UT. Easy. Now the hard part.</p> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/loose_parts-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/loose_parts-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/loose_parts-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/loose_parts.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="loose parts" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/power_plan-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/power_plan-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/power_plan-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/power_plan.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="napkin math" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> A scattering of parts and a plan </div> <h2 id="approach">Approach</h2> <p>Turns out, this project was actually three projects in a trench coat, each depending on the former. In the stack:</p> <ol> <li> <strong>The case</strong>: The case is the part most people imagine when they hear “3D Printer”. It is all of the hardware that makes the machine: linear rails, belts, motors, lights, the printing bed, end stops, etc. I needed to turn our loose box of parts into a case.</li> <li> <strong>The control board</strong>: Once the case is complete, we have a fully built box that does not do anything. The control board acts as the orchestrator, converting commands into coordinated movements and actions. Everything from the movement of motors, extrusion of filament, to the heating of the bed and filament heating elements are performed by the control board.</li> <li> <strong>The GCode Sender</strong>: With both a case and a control board, the machine can now take commands and convert them into intricate actions. These commands come from our GCode sender. It is responsible for ensuring commands are received and executed in a timely manner, and handles unexpected events.</li> </ol> <p>If you have never worked with 3D printers before, this may seem confusing. I always love a good analogy, so I will try to devise one for you here.</p> <p>Imagine this whole system as a car. The <strong>case</strong> is the visible parts: the wheels, the engine, the frame. Very good, but it won’t drive anywhere quite yet. In order to move, it will need a way of converting commands into actions.</p> <p>The <strong>control board</strong> is like our steering wheel, pedals, indicator blinker buttons, and windshield wiper stick. Of course, the gas pedal does not make the car move. It just converts a command (depression of the gas pedal) into actions (more engine force). The car is now drivable!</p> <p>Finally, our <strong>GCode sender</strong> is like the driver. Its job is to interpret the state of the environment and convert its plans into commands. If it wants to reach a higher speed, it will send a command for more gas.</p> <h2 id="the-case">The Case</h2> <p>First, we need our case. All the commands in the world will not do us any good if there is nothing to perform them. My job was to take the loose parts and assemble them into a machine.</p> <p>Now, although this step involved the least electrical engineering, I think it is still exciting to talk about. Being now several years removed from my undergraduate, I still marvel at the fact that it was possible to <em>build a machine</em> using the machines at Texas Inventionworks. I will be forever grateful for that opportunity.</p> <h3 id="cutting-the-case">Cutting the Case</h3> <p>So what’s the plan? I measured out the linear rails and base to understand the inside dimensions that I would need for the case. A 3D printer is, in most cases, just a box with mounts for motors and the bed. TIW had multiple Spectrum laser beds, good for quickly cutting thin sheets of wood and acrylic with high precision. I could use these to design and fabricate the exterior of the case quickly.</p> <p>So I went to a favorite site of TIW, <a href="https://boxes.boringplace.org/" rel="external nofollow noopener" target="_blank">boxes.py</a>, to build a box to the correct dimensions. If you ever find yourself needing to laser cut a 3D project, you ought to check it out. It will save you an enormous amount of stress designing your projects, and will even plan your finger joints to boot.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/boxes_py-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/boxes_py-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/boxes_py-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/boxes_py.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="example image" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame1-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame1-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame1.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="case building 1" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame3-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame3-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame3-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/laser-cut_frame3.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Drilling mounting holes" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Left: Crafting the case components using Boxes.py. <br> Center and Right: Drilling mounting holes after laser cutting the parts. </div> <p>After cutting the outer case from 1/4 inch plywood, I cut a large window in four of the six faces to access the inside. You can see that our vertical rails fit snugly inside. What a relief! The finger joints holding the faces together were <em>very</em> snug, and held together easily. With a little wood glue and some clamps, the case ended up being surprisingly sturdy.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/gluing_case-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/gluing_case-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/gluing_case-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/gluing_case.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Assembling the case after checking the rails." data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/case_no_internals-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/case_no_internals-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/case_no_internals-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/case_no_internals.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Printer case without internals" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Left to right: Assembling the case after checking the rail heights. Final printer case without internals. </div> <h3 id="testing-the-hardware">Testing the Hardware</h3> <p>Last but not least, we needed some internals. All of the parts <em>fit</em> in the case, but do they work? I borrowed a pre-built control board and a power supply to test the hardware.</p> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/projects/electronics/rickety-3d-printer/check_before_assembly.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls=""></video> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <video src="/assets/video/projects/electronics/rickety-3d-printer/zaxis-working.mp4" class="img-fluid rounded z-depth-1" width="auto" height="auto" controls=""></video> </figure> </div> </div> <div class="caption"> A simple, elegant caption looks good between video rows, after each row, or doesn't have to be there at all. </div> <h2 id="the-control-board">The Control Board</h2> <p>This component is what made this an <em>embedded systems</em> project, and was the heart of the lab. The control board receives signals from a gcode sender and maps those to discrete actions. For this project the control board managed:</p> <ul> <li>6 motor drivers <ul> <li>3 for moving in the X,Y, and Z axes</li> <li>3 for filament extrusion</li> </ul> </li> <li>4 fans <ul> <li>3 for cooling print heads</li> <li>1 fan for cooling the case</li> </ul> </li> <li>3 endstops for calibrating the position of the print head</li> <li>1 heated print bed</li> <li>3 thermistors for measuring the temperature of the heated bed and print head</li> <li>1 strip of case LEDs</li> </ul> <p>That turns out to be a lot of parts, and a precarious mix of high power lines and low power signals all on one board.</p> <h3 id="system-design">System Design</h3> <p>Before designing a control board, I needed to decide which components the board needed to control. The first few decisions are relatively easy. We will need it to move in three axes. The extruder will need to be hot so that it can melt the filament before depositing it on the print bed. The print bed ought to be hot, but not too hot, to prevent the print from warping as it cooled.</p> <p>But then there are some unexpected parts that you might only recognize if you are familiar with 3D printers. Or, more precisely, if you are familiar with the many, many ways in which they can go wrong. With enough failed prints, you would ask:</p> <ul> <li>How can I ensure the motor that is driving the filament through the heated tip does not itself overheat? <ul> <li>A: An extruder fan</li> </ul> </li> <li>How can I shut this down <strong>immediately</strong> if something goes bad? <ul> <li>A: Emergency power switch</li> </ul> </li> <li>How does a 3D printer “know” where the print head is? <ul> <li>A: Using endstops to calibrate for the origin</li> </ul> </li> <li>How can I see my cool print better while it is printing? <ul> <li>A: LEDs in your case</li> </ul> </li> <li>Who is in charge of commands for our actuators? <ul> <li>A: The MCU, with control firmware</li> </ul> </li> </ul> <p>The firmware in this last point has a huge job. It turns out, almost all of our devices required different protocols to get them to work as intended, and many at different frequencies. In addition, there were lots of possible safety concerns for this project, from thermal runaway to power loss recovery. Not surprisingly, the firmware to manage all of these parts in near realtime is <em>very</em> complex, and I was not going to have time to write this by the end of the semester.</p> <p>After reading around I found <a href="https://marlinfw.org/" rel="external nofollow noopener" target="_blank">Marlin</a>, an open-source firmware suite that was designed for running on 3D printer control boards. Even better, it was compatible with my favorite microcontroller board at the time, the NodeMCU ESP32. Lovely! Now to connect the parts.</p> <h3 id="schematic-design">Schematic Design</h3> <p>For the embedded systems lab class, we were <em>supposed</em> to use Eagle EDA to design our boards. At the time, I did not have a laptop that I could easily carry with me to class. My daily driver while on the move was a 2017 Chromebook 3, which did not support this, or really any software.</p> <p>Luckily, I had a very kind TA who let me use EasyEDA, which has a convenient web interface. Bonus points that it connects natively with JLC PCB, making fabrication a breeze. Thanks, Burak.</p> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_1-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_1-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_1-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="MCU schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_2%20copy-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_2%20copy-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_2%20copy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_2%20copy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Motor drivers schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_3%20copy-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_3%20copy-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_3%20copy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_3%20copy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Extruder drivers schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_4%20copy-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_4%20copy-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_4%20copy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_4%20copy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Thermistor and fans schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_5%20copy-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_5%20copy-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_5%20copy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_5%20copy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="High power devices schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_6%20copy-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_6%20copy-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_6%20copy-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/Sheet_6%20copy.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Signal input schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> <div class="caption"> A series of six schematics, together forming the full control board. </div> <p>A seasoned electrical engineer may find it surprising how simple many of the sub-components ended up being. With the exception of a few niche parts and poorly-named headers, most of these diagrams will be instantly recognizable. They will be further surprised with what a mess I made of these neat diagrams once I placed and router them on the PCB.</p> <p>Probably the only part worth discussing is found in schematic 1 on the first slide. To interface with all of these components required far more pins than the NodeMCU could support with a measly 38 pins. Indeed, Marlin firmware was originally written for the STM32 MCU family, which often have 64 pins. I used two I2C shift registers with to extend the number of available GPIO pins, at the expense of speed. Fortunately, the NodeMCU board boasts a clock speed of over <a href="https://www.espressif.com/sites/default/files/documentation/esp32_datasheet_en.pdf" rel="external nofollow noopener" target="_blank">160 MHz</a>, where a typical STM32 board is run at only 16MHz. This leaves plenty of overhead despite losing some time to the shift registers.</p> <h3 id="pcb-design">PCB Design</h3> <img-comparison-slider> <figure slot="first"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardBottom-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardBottom-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardBottom-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardBottom.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Control board PCB bottom traces" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure slot="second"> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardTop-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardTop-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardTop-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/ControlBoardTop.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Control board PCB top traces" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </img-comparison-slider> <div class="caption"> Control board PCB, bottom traces left, top traces right.<br> Slide the divider back and forth to compare. </div> <p>This board was fun to route. I followed the pattern of having each side of the board correspond to an axis of travel for traces. The top was for left-right traversal, and the bottom of the board was top-bottom. If I were to do this again, I may have used more layers to act as ground planes for the high-power components, but we were limited to 2 layers at the time.</p> <p>Most of the high-power traces were concentrated in the bottom left quadrant of the board. These were to offer three (3!) power inputs for the bed, the motors, and for the low-power components separately. There were also the header and power transistor used to manage the print bed heating via PWM.</p> <p>Once this was ready, it was just a matter of clipping the correct parts into place and letting it run.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/control-board/CB_Render-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/control-board/CB_Render-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/control-board/CB_Render-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/control-board/CB_Render.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Control Board PCB Render" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> A render of the control board PCB, before fabrication. </div> <h4 id="pcb-testing">PCB Testing</h4> <h2 id="the-gcode-sender">The GCode Sender</h2> <h3 id="gcode-hardware">GCode Hardware</h3> <p>The GCode sender was just the opposite of the control board: simple hardware and challenging firmware. The system was tiny: an MCU, a dial, a button, and some pins to connect to the control board. After checking the setup on a breadboard to make sure it worked, the system was easy to consolidate on a PCB.</p> <swiper-container keyboard="true" navigation="true" pagination="true" pagination-clickable="true" pagination-dynamic-bullets="true" rewind="true"> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/Schematic_GCode-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/Schematic_GCode-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/Schematic_GCode-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/Schematic_GCode.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GCode sender schematic" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderTop-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderTop-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderTop-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderTop.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GCode sender PCB top" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderBottom-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderBottom-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderBottom-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/GSenderBottom.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GCode sender PCB bottom" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> <swiper-slide> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/SenderRender-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/SenderRender-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/SenderRender-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/gcode-sender/SenderRender.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="GCode sender PCB render" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </swiper-slide> </swiper-container> <div class="caption"> GCode Sender, from schematic to PCB. </div> <p>The LCD display I selected also had a micro SD card slot, making it easy to store and transfer large files to the gcode sender. As will be seen in the firmware section, the SD card could also be used as storage for the files uploaded via the internet.</p> <h3 id="gcode-sender-firmware">GCode Sender Firmware</h3> <p>This is where I really dove deep with the firmware. Again the MCU for this device was the Espressif ESP32, renowned for its speed, price, and built-in networking capabilities. I used the Arduino IDE to compile and flash the firmware for this device, as it was a more mature platform for ESP libraries at the time. All of the code written for the gcode sender was written in the Arduino language, which is simply a slightly modified C++.</p> <p>The firmware for this component served multiple functions at once.</p> <ol> <li> <strong>Send and receive GCode, managing the print</strong>. This is the device’s primary job. Send instructions to the control board one at a time, and respond appropriately to any messages it returns.</li> <li> <strong>Act as an interface for the user</strong>. The user should be able to see the relative progress of the print and other important data, such as the current temperatures of the extruder and the print bed. This data is received from the control board, which is managing those components.</li> <li> <strong>Host a web server?</strong> This one was not at all necessary, but made the project a lot more fun. I thought it would be neat if a user could access the gcode sender via their browser and upload files for prints they wanted to complete. Of course, they could always write it to the micro SD card and insert it in the display. But this saved a little bit of walking, and allowed for my classmates to submit their fun prints, too.</li> </ol> <h2 id="conclusion">Conclusion</h2> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/RicketyPrinter-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/RicketyPrinter-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/RicketyPrinter-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/RicketyPrinter.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="loose parts" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-4 mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/electronics/rickety-3d-printer/power_plan-480.webp 480w,/assets/img/projects/electronics/rickety-3d-printer/power_plan-800.webp 800w,/assets/img/projects/electronics/rickety-3d-printer/power_plan-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/projects/electronics/rickety-3d-printer/power_plan.jpg" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="napkin math" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h3 id="project-video">Project Video</h3> <p>As a part of the grade for submitting the final lab, each project needed to submit a video describing the components and its functionality. Check it out to see the printer in action! You can also catch a glimpse of the magic inside of Texas Inventionworks.</p> <div class="row mt-3"> <div class="col-lg mt-3 mt-md-0"> <figure> <iframe src="https://www.youtube.com/watch?v=GXcW5YrqNoA" class="img-fluid rounded z-depth-1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="" width="auto" height="auto"></iframe> </figure> </div> </div> <div class="caption"> If you have any trouble viewing the embedded video, you can find it <a href="https://www.youtube.com/watch?v=GXcW5YrqNoA" rel="external nofollow noopener" target="_blank">here on YouTube</a>. </div> </article> <div id="giscus_thread" style="max-width: 1080px; margin: 0 auto;"> <script>let giscusTheme=determineComputedTheme(),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"KCerveny/KCerveny.github.io","data-repo-id":"","data-category":"Comments","data-category-id":"","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,e])=>giscusScript.setAttribute(t,e)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Kellan J. Cerveny. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. Last updated: August 21, 2024. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script defer src="https://cdn.jsdelivr.net/npm/img-comparison-slider@8.0.6/dist/index.min.js" integrity="sha256-EXHg3x1K4oIWdyohPeKX2ZS++Wxt/FRPH7Nl01nat1o=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/swiper@11.0.5/swiper-element-bundle.min.js" integrity="sha256-BPrwikijIybg9OQC5SYFFqhBjERYOn97tCureFgYH1E=" crossorigin="anonymous"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"projects",description:"A growing collection of things I am creating.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-bench-power-supply",title:"Bench Power Supply",description:"Your handy companion for electronics projects",section:"Projects",handler:()=>{window.location.href="/projects/bench-power-supply/"}},{id:"projects-drone-power-distribution-board",title:"Drone Power Distribution Board",description:"High-powered, high flying hijinks",section:"Projects",handler:()=>{window.location.href="/projects/feather-pdb/"}},{id:"projects-follow-me-lights",title:"Follow-me Lights",description:"Writeup coming soon!",section:"Projects",handler:()=>{window.location.href="/projects/follow-me-lights/"}},{id:"projects-hacked-garage-opener",title:"Hacked Garage Opener",description:"Sometimes you gotta break in to your own home",section:"Projects",handler:()=>{window.location.href="/projects/hacked-garage/"}},{id:"projects-the-rickety-3d-printer",title:"The Rickety 3D Printer",description:"A 3D printer built from scratch in the labs of Texas Inventionworks.",section:"Projects",handler:()=>{window.location.href="/projects/rickety-3d-printer/"}},{id:"projects-floating-arcade-cabinet",title:"Floating Arcade Cabinet",description:"Writeup coming soon!",section:"Projects",handler:()=>{window.location.href="/projects/floating-arcade/"}},{id:"projects-my-first-website",title:"My First Website",description:"Writeup coming soon!",section:"Projects",handler:()=>{window.location.href="/projects/kellans-first-website/"}},{id:"projects-keyboard-wrist-rest",title:"Keyboard Wrist Rest",description:"My keyboard's companion",section:"Projects",handler:()=>{window.location.href="/projects/keyboard-wrist-rest/"}},{id:"projects-minimalist-key-rack",title:"Minimalist Key Rack",description:"Writeup coming soon!",section:"Projects",handler:()=>{window.location.href="/projects/minimalist-keyrack/"}},{id:"projects-movie-honeycomb",title:"Movie Honeycomb",description:"Making movie night a no-brainer",section:"Projects",handler:()=>{window.location.href="/projects/movie-honeycomb/"}},{id:"projects-the-pinecone-lamp",title:"The Pinecone Lamp",description:"Just as fun as it sounds!",section:"Projects",handler:()=>{window.location.href="/projects/pinecone-lamp/"}},{id:"projects-ut-austin-coasters",title:"UT Austin Coasters",description:"UT graduation presents for my friends",section:"Projects",handler:()=>{window.location.href="/projects/ut-coasters/"}},{id:"projects-wild-west-secret-hitler-boardgame",title:"Wild West Secret Hitler Boardgame",description:"Writeup coming soon!",section:"Projects",handler:()=>{window.location.href="/projects/wild-west-boardgame/"}},{id:"projects-wisconsin-union-coasters",title:"Wisconsin Union Coasters",description:"A little fun celebrating my family's heritage",section:"Projects",handler:()=>{window.location.href="/projects/wisconsin-union-coasters/"}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/KCerveny","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/kellan-cerveny","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>